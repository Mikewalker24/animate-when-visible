!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).animateWhenVisible=t()}(this,function(){"use strict";return function animateWhenVisible(e={}){const t={threshold:.1,staggerDelay:100,staggerDelaySlow:250,animationClass:"awv-visible",staggerClass:"awv-stagger",staggerSlowClass:"awv-stagger-slow",targetSelector:".awv-animate",staggerContainerSelector:".awv-stagger-container",onVisible:null,observeMutations:!0,animateOnScrollDownOnly:!1,...e},s=new Map;let n=0;const o=new Map;let a=window.scrollY;const r=new IntersectionObserver(e=>{const n=window.scrollY,l=n>a;a=n,e.filter(e=>e.isIntersecting).sort((e,t)=>s.get(e.target)-s.get(t.target)).forEach(e=>{if(t.animateOnScrollDownOnly&&!l)return;const s=e.target,n=s.closest(t.staggerContainerSelector)||s.closest("section")||s.closest("nav")||document.body;o.has(n)||o.set(n,0);const a=o.get(n),i=n.querySelectorAll(`.${t.animationClass}`).length,c=s.classList.contains(t.staggerSlowClass)?(a-i)*t.staggerDelaySlow+"ms":s.classList.contains(t.staggerClass)?(a-i)*t.staggerDelay+"ms":"0ms";requestAnimationFrame(()=>{s.style.transitionDelay=c,s.classList.add(t.animationClass),s.addEventListener("transitionend",()=>s.style.transitionDelay="0ms",{once:!0}),"function"==typeof t.onVisible&&t.onVisible(s)}),o.set(n,a+1),r.unobserve(s)})},{threshold:t.threshold}),observeElements=e=>{e.forEach(e=>{s.has(e)||s.set(e,n++),r.observe(e)})};let l;return observeElements(document.querySelectorAll(t.targetSelector)),t.observeMutations&&(l=new MutationObserver(e=>{const s=[];e.forEach(e=>e.addedNodes.forEach(e=>{1===e.nodeType&&(e.matches(t.targetSelector)?s.push(e):s.push(...e.querySelectorAll(t.targetSelector)))})),s.length&&observeElements(s)}),l.observe(document.body,{childList:!0,subtree:!0})),{destroy(){r.disconnect(),l&&l.disconnect()},refresh(){observeElements(document.querySelectorAll(t.targetSelector))}}}});
//# sourceMappingURL=index.js.map
