function animateWhenVisible(e={}){const t={threshold:.1,staggerDelay:100,staggerDelaySlow:250,animationClass:"awv-visible",staggerClass:"awv-stagger",staggerSlowClass:"awv-stagger-slow",targetSelector:".awv-animate",staggerContainerSelector:".awv-stagger-container",onVisible:null,observeMutations:!1,animateOnScrollDownOnly:!1,...e},s=new Map;let n=0;const a=new Map;let o=window.scrollY;const r=new IntersectionObserver(function handleIntersect(e){const n=window.scrollY,i=n>o;o=n,e.filter(e=>e.isIntersecting).sort((e,t)=>s.get(e.target)-s.get(t.target)).forEach(e=>{if(t.animateOnScrollDownOnly&&!i)return;const s=e.target;if(!(s.classList.contains(t.staggerClass)||s.classList.contains(t.staggerSlowClass)))return void function animateImmediate(e){e.classList.add(t.animationClass),"function"==typeof t.onVisible&&t.onVisible(e);r.unobserve(e)}(s);const n=function getStaggerContainer(e){return e.closest(t.staggerContainerSelector)||e.closest("section")||e.closest("nav")||document.body}(s);!function animateWithStagger(e,s){a.has(s)||a.set(s,0);const n=function getStaggerDelay(e,s){const n=a.get(s)??0;if(e.classList.contains(t.staggerSlowClass))return n*t.staggerDelaySlow+"ms";if(e.classList.contains(t.staggerClass))return n*t.staggerDelay+"ms";return"0ms"}(e,s);requestAnimationFrame(()=>{e.style.transitionDelay=n,e.classList.add(t.animationClass),e.addEventListener("transitionend",()=>e.style.transitionDelay="0ms",{once:!0}),"function"==typeof t.onVisible&&t.onVisible(e)}),a.set(s,a.get(s)+1),r.unobserve(e)}(s,n)})},{threshold:t.threshold});function observeElements(e){e.forEach(e=>{s.has(e)||s.set(e,n++),r.observe(e)})}let i;return observeElements(document.querySelectorAll(t.targetSelector)),t.observeMutations&&(i=new MutationObserver(function handleMutations(e){const s=new Set;e.forEach(e=>e.addedNodes.forEach(e=>{1===e.nodeType&&(e.matches(t.targetSelector)?s.add(e):e.querySelectorAll(t.targetSelector).forEach(e=>s.add(e)))})),s.size&&observeElements([...s])}),i.observe(document.body,{childList:!0,subtree:!0})),{destroy(){r.disconnect(),i&&i.disconnect()},refresh(){observeElements(document.querySelectorAll(t.targetSelector))}}}export{animateWhenVisible as default};
//# sourceMappingURL=index.js.map
